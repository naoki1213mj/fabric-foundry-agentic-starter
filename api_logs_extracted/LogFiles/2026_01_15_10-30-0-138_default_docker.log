2026-01-15T15:45:48.6253371Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py:537 - WARNING] Overriding of current TracerProvider is not allowed
2026-01-15T15:45:48.6313100Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/_logs/_internal/__init__.py:305 - WARNING] Overriding of current LoggerProvider is not allowed
2026-01-15T15:45:48.6328398Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/metrics/_internal/__init__.py:864 - WARNING] Overriding of current MeterProvider is not allowed
2026-01-15T15:45:48.6378238Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.6413450Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.6482507Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.6509051Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.7127003Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py:537 - WARNING] Overriding of current TracerProvider is not allowed
2026-01-15T15:45:48.7160080Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/_logs/_internal/__init__.py:305 - WARNING] Overriding of current LoggerProvider is not allowed
2026-01-15T15:45:48.7185426Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/metrics/_internal/__init__.py:864 - WARNING] Overriding of current MeterProvider is not allowed
2026-01-15T15:45:48.7226246Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.7258924Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.7357398Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.7388736Z [2026-01-15 15:45:48 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:45:48.7482854Z INFO:     Started server process [1]
2026-01-15T15:45:48.7484187Z INFO:     Waiting for application startup.
2026-01-15T15:45:48.7501228Z INFO:     Application startup complete.
2026-01-15T15:45:48.7514927Z INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
2026-01-15T15:45:49.0338951Z INFO:     169.254.130.1:42057 - "GET /robots933456.txt HTTP/1.1" 404 Not Found
2026-01-15T15:45:49.2174444Z INFO:     169.254.130.1:42061 - "GET / HTTP/1.1" 404 Not Found
2026-01-15T15:45:49.2651396Z INFO:     169.254.130.1:42061 - "GET / HTTP/1.1" 404 Not Found
2026-01-15T15:46:33.7114239Z INFO:     Shutting down
2026-01-15T15:46:33.8202358Z INFO:     Waiting for application shutdown.
2026-01-15T15:46:33.8213050Z INFO:     Application shutdown complete.
2026-01-15T15:46:33.8213198Z INFO:     Finished server process [1]
2026-01-15T15:49:07.8790236Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py:537 - WARNING] Overriding of current TracerProvider is not allowed
2026-01-15T15:49:07.8817160Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/_logs/_internal/__init__.py:305 - WARNING] Overriding of current LoggerProvider is not allowed
2026-01-15T15:49:07.8833929Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/metrics/_internal/__init__.py:864 - WARNING] Overriding of current MeterProvider is not allowed
2026-01-15T15:49:07.8868977Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.8898012Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.8958220Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.8983249Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.9394871Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py:537 - WARNING] Overriding of current TracerProvider is not allowed
2026-01-15T15:49:07.9409357Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/_logs/_internal/__init__.py:305 - WARNING] Overriding of current LoggerProvider is not allowed
2026-01-15T15:49:07.9425848Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/metrics/_internal/__init__.py:864 - WARNING] Overriding of current MeterProvider is not allowed
2026-01-15T15:49:07.9462989Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.9485252Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.9536145Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.9570298Z [2026-01-15 15:49:07 - /usr/local/lib/python3.11/site-packages/opentelemetry/instrumentation/instrumentor.py:103 - WARNING] Attempting to instrument while already instrumented
2026-01-15T15:49:07.9644788Z INFO:     Started server process [1]
2026-01-15T15:49:07.9648047Z INFO:     Waiting for application startup.
2026-01-15T15:49:07.9651405Z INFO:     Application startup complete.
2026-01-15T15:49:07.9656508Z INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
2026-01-15T15:49:08.3188518Z INFO:     169.254.130.1:38407 - "GET /robots933456.txt HTTP/1.1" 404 Not Found
2026-01-15T15:50:44.5344063Z INFO:     169.254.130.1:63067 - "OPTIONS /historyfab/list?offset=0&limit=25 HTTP/1.1" 200 OK
2026-01-15T15:50:45.0529966Z [2026-01-15 15:50:45 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T15:50:45.0559366Z [2026-01-15 15:50:45 - /app/history_sql.py:230 - ERROR] Error executing SQL query: 'NoneType' object has no attribute 'cursor'
2026-01-15T15:50:45.0597686Z [2026-01-15 15:50:45 - /app/history_sql.py:308 - ERROR] Error in get_conversation
2026-01-15T15:50:45.0597802Z Traceback (most recent call last):
2026-01-15T15:50:45.0598411Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T15:50:45.0598453Z     result = await run_query_params(query, params)
2026-01-15T15:50:45.0598486Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:45.0598520Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T15:50:45.0598608Z     conn.close()
2026-01-15T15:50:45.0598640Z     ^^^^^^^^^^
2026-01-15T15:50:45.0598675Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:45.0606352Z [2026-01-15 15:50:45 - /app/history_sql.py:925 - ERROR] Exception in /historyfab/list: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:45.0606437Z Traceback (most recent call last):
2026-01-15T15:50:45.0606475Z   File "/app/history_sql.py", line 909, in list_conversations
2026-01-15T15:50:45.0606510Z     conversations = await get_conversations(user_id, offset=offset, limit=limit)
2026-01-15T15:50:45.0606543Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:45.0606584Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T15:50:45.0606641Z     result = await run_query_params(query, params)
2026-01-15T15:50:45.0606672Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:45.0606703Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T15:50:45.0606732Z     conn.close()
2026-01-15T15:50:45.0606760Z     ^^^^^^^^^^
2026-01-15T15:50:45.0606792Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:45.0647872Z INFO:     169.254.130.1:63067 - "GET /historyfab/list?offset=0&limit=25 HTTP/1.1" 500 Internal Server Error
2026-01-15T15:50:48.5255199Z INFO:     169.254.130.1:63067 - "OPTIONS /api/chat HTTP/1.1" 200 OK
2026-01-15T15:50:49.0660420Z INFO:     169.254.130.1:63067 - "POST /api/chat HTTP/1.1" 200 OK
2026-01-15T15:50:49.1157174Z [2026-01-15 15:50:49 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T15:50:49.1161651Z [2026-01-15 15:50:49 - /app/chat.py:169 - ERROR] Failed to establish database connection
2026-01-15T15:50:49.1193136Z [2026-01-15 15:50:49 - /app/chat.py:216 - ERROR] Error in stream_openai_text: Database connection failed
2026-01-15T15:50:49.1216398Z [2026-01-15 15:50:49 - /app/chat.py:269 - ERROR] Unexpected error: 500: Error streaming OpenAI text
2026-01-15T15:50:54.4596273Z INFO:     169.254.130.1:22161 - "POST /api/chat HTTP/1.1" 200 OK
2026-01-15T15:50:54.5332263Z [2026-01-15 15:50:54 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T15:50:54.5338061Z [2026-01-15 15:50:54 - /app/chat.py:169 - ERROR] Failed to establish database connection
2026-01-15T15:50:54.5343490Z [2026-01-15 15:50:54 - /app/chat.py:216 - ERROR] Error in stream_openai_text: Database connection failed
2026-01-15T15:50:54.5346392Z [2026-01-15 15:50:54 - /app/chat.py:269 - ERROR] Unexpected error: 500: Error streaming OpenAI text
2026-01-15T15:50:57.9510401Z [2026-01-15 15:50:57 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T15:50:57.9518153Z [2026-01-15 15:50:57 - /app/history_sql.py:230 - ERROR] Error executing SQL query: 'NoneType' object has no attribute 'cursor'
2026-01-15T15:50:57.9525130Z [2026-01-15 15:50:57 - /app/history_sql.py:308 - ERROR] Error in get_conversation
2026-01-15T15:50:57.9526535Z Traceback (most recent call last):
2026-01-15T15:50:57.9526588Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T15:50:57.9526624Z     result = await run_query_params(query, params)
2026-01-15T15:50:57.9526654Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:57.9526706Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T15:50:57.9526737Z     conn.close()
2026-01-15T15:50:57.9526769Z     ^^^^^^^^^^
2026-01-15T15:50:57.9526804Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:57.9535887Z [2026-01-15 15:50:57 - /app/history_sql.py:925 - ERROR] Exception in /historyfab/list: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:57.9535986Z Traceback (most recent call last):
2026-01-15T15:50:57.9536021Z   File "/app/history_sql.py", line 909, in list_conversations
2026-01-15T15:50:57.9536053Z     conversations = await get_conversations(user_id, offset=offset, limit=limit)
2026-01-15T15:50:57.9536084Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:57.9536116Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T15:50:57.9536148Z     result = await run_query_params(query, params)
2026-01-15T15:50:57.9536197Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T15:50:57.9536229Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T15:50:57.9536259Z     conn.close()
2026-01-15T15:50:57.9536289Z     ^^^^^^^^^^
2026-01-15T15:50:57.9536321Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T15:50:57.9542021Z INFO:     169.254.130.1:22161 - "GET /historyfab/list?offset=0&limit=25 HTTP/1.1" 500 Internal Server Error
2026-01-15T16:00:17.5270369Z INFO:     169.254.130.1:49929 - "GET /historyfab/list?offset=0&limit=25 HTTP/1.1" 500 Internal Server Error
2026-01-15T16:00:17.5318716Z [2026-01-15 16:00:17 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T16:00:17.5319173Z [2026-01-15 16:00:17 - /app/history_sql.py:230 - ERROR] Error executing SQL query: 'NoneType' object has no attribute 'cursor'
2026-01-15T16:00:17.5319213Z [2026-01-15 16:00:17 - /app/history_sql.py:308 - ERROR] Error in get_conversation
2026-01-15T16:00:17.5319244Z Traceback (most recent call last):
2026-01-15T16:00:17.5319275Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T16:00:17.5319305Z     result = await run_query_params(query, params)
2026-01-15T16:00:17.5319334Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:00:17.5319364Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T16:00:17.5319392Z     conn.close()
2026-01-15T16:00:17.5319420Z     ^^^^^^^^^^
2026-01-15T16:00:17.5319464Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T16:00:17.5319497Z [2026-01-15 16:00:17 - /app/history_sql.py:925 - ERROR] Exception in /historyfab/list: 'NoneType' object has no attribute 'close'
2026-01-15T16:00:17.5319524Z Traceback (most recent call last):
2026-01-15T16:00:17.5319554Z   File "/app/history_sql.py", line 909, in list_conversations
2026-01-15T16:00:17.5319584Z     conversations = await get_conversations(user_id, offset=offset, limit=limit)
2026-01-15T16:00:17.5319615Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:00:17.5319644Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T16:00:17.5319672Z     result = await run_query_params(query, params)
2026-01-15T16:00:17.5319699Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:00:17.5319728Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T16:00:17.5319754Z     conn.close()
2026-01-15T16:00:17.5319790Z     ^^^^^^^^^^
2026-01-15T16:00:17.5319821Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T16:01:07.0492040Z INFO:     169.254.130.1:23235 - "OPTIONS /historyfab/list?offset=0&limit=25 HTTP/1.1" 200 OK
2026-01-15T16:01:07.5210588Z [2026-01-15 16:01:07 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T16:01:07.5235776Z [2026-01-15 16:01:07 - /app/history_sql.py:230 - ERROR] Error executing SQL query: 'NoneType' object has no attribute 'cursor'
2026-01-15T16:01:07.5319205Z [2026-01-15 16:01:07 - /app/history_sql.py:308 - ERROR] Error in get_conversation
2026-01-15T16:01:07.5319404Z Traceback (most recent call last):
2026-01-15T16:01:07.5319441Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T16:01:07.5319471Z     result = await run_query_params(query, params)
2026-01-15T16:01:07.5319500Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:01:07.5319530Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T16:01:07.5319557Z     conn.close()
2026-01-15T16:01:07.5319584Z     ^^^^^^^^^^
2026-01-15T16:01:07.5319641Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T16:01:07.5328570Z [2026-01-15 16:01:07 - /app/history_sql.py:925 - ERROR] Exception in /historyfab/list: 'NoneType' object has no attribute 'close'
2026-01-15T16:01:07.5328659Z Traceback (most recent call last):
2026-01-15T16:01:07.5328693Z   File "/app/history_sql.py", line 909, in list_conversations
2026-01-15T16:01:07.5328726Z     conversations = await get_conversations(user_id, offset=offset, limit=limit)
2026-01-15T16:01:07.5328756Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:01:07.5328786Z   File "/app/history_sql.py", line 305, in get_conversations
2026-01-15T16:01:07.5328817Z     result = await run_query_params(query, params)
2026-01-15T16:01:07.5328851Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2026-01-15T16:01:07.5328881Z   File "/app/history_sql.py", line 235, in run_query_params
2026-01-15T16:01:07.5328932Z     conn.close()
2026-01-15T16:01:07.5328964Z     ^^^^^^^^^^
2026-01-15T16:01:07.5328996Z AttributeError: 'NoneType' object has no attribute 'close'
2026-01-15T16:01:07.5335640Z INFO:     169.254.130.1:23235 - "GET /historyfab/list?offset=0&limit=25 HTTP/1.1" 500 Internal Server Error
2026-01-15T16:01:12.9971702Z INFO:     169.254.130.1:23249 - "OPTIONS /api/chat HTTP/1.1" 200 OK
2026-01-15T16:01:13.2720904Z INFO:     169.254.130.1:23249 - "POST /api/chat HTTP/1.1" 200 OK
2026-01-15T16:01:13.3153793Z [2026-01-15 16:01:13 - /app/history_sql.py:135 - ERROR] FABRIC-SQL: Driver 18 connection failed with error: ('HY000', '[HY000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]This SQL database has been disabled. Please reach out to your Fabric Capacity administrator for more information. (42131) (SQLDriverConnect)')
2026-01-15T16:01:13.3160646Z [2026-01-15 16:01:13 - /app/chat.py:169 - ERROR] Failed to establish database connection
2026-01-15T16:01:13.3172875Z [2026-01-15 16:01:13 - /app/chat.py:216 - ERROR] Error in stream_openai_text: Database connection failed
2026-01-15T16:01:13.3173056Z [2026-01-15 16:01:13 - /app/chat.py:269 - ERROR] Unexpected error: 500: Error streaming OpenAI text
